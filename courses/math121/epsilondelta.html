<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Epsilon-Delta Activity</title>
  <link rel="stylesheet" href="/math-tools/style.css" />

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>

</head>
<body>
  <header>
    <h1>Epsilon-Delta Activity</h1>
    <div id="nav-placeholder"></div>
      <script>
        fetch("/math-tools/nav.html")
          .then(response => response.text())
          .then(data => {
            document.getElementById("nav-placeholder").innerHTML = data;
        
            const currentPath = window.location.pathname.replace(/\/index\.html$/, "/");
            const navLinks = document.querySelectorAll("#nav-placeholder a");
        
            navLinks.forEach(link => {
              const linkPath = new URL(link.href).pathname.replace(/\/index\.html$/, "/");
              if (linkPath === currentPath) {
                link.classList.add("active");
              }
            });
          });
      </script>
  </header>
  <main>

    <p>This activity will (hopefully) help you become more comfortable with the dreaded \(\epsilon\)-\(\delta\) definition of a limit.  Press Start to 
      generate a random quadratic and an attached limit question.  Then, press Generate \(\epsilon\) to create a random fixed value of \(\epsilon\), 
      which you are challenged to come up with a \(\delta\) value for which \( |x - p| < \delta \Rightarrow |f(x) - L| < \epsilon \).  Finally, you can 
        attempt to solve the general problem for an arbitrary \(\epsilon\).</p>
    
    <div class="button-container">
      <button id="start-btn" class="rubber-button">Start!</button>
    </div>

    <div style="height: 10px;"></div>
  
    <div id="question-area">
      <div id="fx-display" class="math"></div>
      <div id="p-value" class="math"></div>
      <div id="limit-value" class="math"></div>
    </div>

    <div style="height: 10px;"></div>

    <div class="button-container">
      <button id="epsilon-btn" class="rubber-button" style="display: none;">Generate ε</button>
    </div>

    <div id="epsilon-display" style="margin-top: 10px; font-weight: bold;"></div>

    <div id="delta-area" style="display: none; margin-top: 10px; text-align: center;">
      <label for="delta-input">Enter δ:</label>
      <input type="number" id="delta-input" step="0.01">
      <button id="check-delta-btn" class="rubber-button">Check Answer</button>
      <div id="delta-feedback" style="margin-top: 5px; font-weight: bold;"></div>
    </div>

  
    <script>
      function generateRandomQuadratic() {

        let a, b;

        while (true) {
          a = Math.floor(Math.random() * 19) - 10;
          b = Math.floor(Math.random() * 41) - 20;
        
          if (a !== 0 && b !== 0) break;
        }
  
        let fx;
        fx = `${a <= 0 ? '-' : ''}${Math.abs(a) !== 1 ? Math.abs(a) : ''}x ${b >= 0 ? '+ ' : '- '}${Math.abs(b) !== 1 ? Math.abs(b) : ''}`;

        let p;
        while (true) {
          p = Math.floor(Math.random() * 11) - 5;
          
          if (p !== 0) break;
        }
        const L = a * p + b;
  
        document.getElementById('fx-display').textContent = `Given the function f(x) = ${fx}, we want to show that`;
        document.getElementById('p-value').textContent = ``;
        //document.getElementById('p-value').textContent = `a = ${a}, b = ${b}, c = ${c}, d = ${d}, A = ${A}, B = ${B}, C = ${C}, p = ${p}`;
        document.getElementById('limit-value').innerHTML = `\\[\\lim_{x \\to ${p}} f(x) = ${L}\\]`;
        MathJax.typesetPromise([document.getElementById('limit-value')]);

  
        window.fxData = {
          a, b, p, L,
          func: (x) => a * x + B
        };
        document.getElementById('epsilon-btn').style.display = 'inline-block';
      }

      function handleGenerateEpsilon() {
        const x = Math.floor(Math.random() * 9) + 1; // x in [1, 9]
        const format = Math.floor(Math.random() * 3); // 0, 1, or 2
      
        let epsilon;
        if (format === 0) {
          epsilon = parseFloat(`0.${x}`);
        } else if (format === 1) {
          epsilon = parseFloat(`0.0${x}`);
        } else {
          epsilon = parseFloat(`0.00${x}`);
        }
      
        document.getElementById('epsilon-display').textContent = `ε = ${epsilon}`;
      
        // Unhide delta input area
        document.getElementById('delta-area').style.display = 'block';
      
        // Optionally clear previous input/feedback
        document.getElementById('delta-input').value = '';
        document.getElementById('delta-feedback').textContent = '';
      }



  
      document.getElementById('start-btn').addEventListener('click', generateRandomQuadratic);
      document.getElementById('epsilon-btn').addEventListener('click', handleGenerateEpsilon);

    </script>
  </main>
</body>
</html>
