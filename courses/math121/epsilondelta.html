<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Epsilon-Delta Activity</title>
  <link rel="stylesheet" href="/math-tools/style.css" />

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>

</head>
<body>
  <header>
    <h1>Epsilon-Delta Activity</h1>
    <div id="nav-placeholder"></div>
      <script>
        fetch("/math-tools/nav.html")
          .then(response => response.text())
          .then(data => {
            document.getElementById("nav-placeholder").innerHTML = data;
        
            const currentPath = window.location.pathname.replace(/\/index\.html$/, "/");
            const navLinks = document.querySelectorAll("#nav-placeholder a");
        
            navLinks.forEach(link => {
              const linkPath = new URL(link.href).pathname.replace(/\/index\.html$/, "/");
              if (linkPath === currentPath) {
                link.classList.add("active");
              }
            });
          });
      </script>
  </header>
  <main>

    <p>This activity will (hopefully) help you become more comfortable with the dreaded \(\epsilon\)-\(\delta\) definition of a limit.  Press Start to 
      generate a random quadratic and an attached limit question.  Then, press Generate \(\epsilon\) to create a random fixed value of \(\epsilon\), 
      which you are challenged to come up with a \(\delta\) value for which \( |x - p| < \delta \Rightarrow |f(x) - L| < \epsilon \).  Finally, you can 
        attempt to solve the general problem for an arbitrary \(\epsilon\).</p>
    
    <div class="button-container">
      <button id="start-btn" class="rubber-button">Start!</button>
    </div>

    <div style="height: 10px;"></div>
  
    <div id="question-area">
      <div id="fx-display" class="math"></div>
      <div id="p-value" class="math"></div>
      <div id="limit-value" class="math"></div>
    </div>

    <div style="height: 10px;"></div>

    <div class="button-container">
      <button class="rubber-button" onclick="handleGenerateEpsilon()">Generate ε</button>
    </div>
    
    <div id="epsilon-display" style="margin-top: 10px; font-weight: bold;"></div>

  
    <script>
      function generateRandomQuadratic() {

        let a, b, c, d;

        while (true) {
          a = Math.floor(Math.random() * 7) - 3;
          b = Math.floor(Math.random() * 7) - 3;
          c = Math.floor(Math.random() * 7) - 3;
          d = Math.floor(Math.random() * 7) - 3;
        
          const firstProduct = a * b;
          const secondProduct = c * d;
        
          if (firstProduct !== 0 && secondProduct !== 0) break;
        }
  
        const A = a * b;
        const B = a * d + b * c;
        const C = c * d;
        let fx;
        if (B !== 0) {
          fx = `${A <= 0 ? '-' : ''}${Math.abs(A) !== 1 ? Math.abs(A) : ''}x² ${B >= 0 ? '+ ' : '- '}${Math.abs(B) !== 1 ? Math.abs(B) : ''}x ${C >= 0 ? '+ ' : '- '}${Math.abs(C)}`;
        } else {
          fx = `${A <= 0 ? '-' : ''}${Math.abs(A) !== 1 ? Math.abs(A) : ''}x² ${C >= 0 ? '+ ' : '- '}${Math.abs(C)}`;
        }
        const p = Math.floor(Math.random() * 11) - 5;
        const L = A * p * p + B * p + C;
  
        document.getElementById('fx-display').textContent = `Given the function f(x) = ${fx}, we want to show that`;
        document.getElementById('p-value').textContent = ``;
        //document.getElementById('p-value').textContent = `a = ${a}, b = ${b}, c = ${c}, d = ${d}, A = ${A}, B = ${B}, C = ${C}, p = ${p}`;
        document.getElementById('limit-value').innerHTML = `\\[\\lim_{x \\to ${p}} f(x) = ${L}\\]`;
        MathJax.typesetPromise([document.getElementById('limit-value')]);

  
        window.fxData = {
          A, B, C, p, L,
          func: (x) => A * x * x + B * x + C
        };
      }

      function handleGenerateEpsilon() {
        const x = Math.floor(Math.random() * 9) + 1; // x in [1, 9]
        const format = Math.floor(Math.random() * 3); // 0, 1, or 2
      
        let epsilon;
        if (format === 0) {
          epsilon = parseFloat(`0.${x}`);
        } else if (format === 1) {
          epsilon = parseFloat(`0.0${x}`);
        } else {
          epsilon = parseFloat(`0.00${x}`);
        }
      
        document.getElementById('epsilon-display').textContent = `ε = ${epsilon}`;
      }


  
      document.getElementById('start-btn').addEventListener('click', generateRandomQuadratic);

    </script>
  </main>
</body>
</html>
