
<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="description" content="Personal website of Ben Fraser, with math education activities for students and teachers.">
  <meta charset="UTF-8" />
  <title>Multiplication Activity</title>
  <link rel="stylesheet" href="/style.css" />

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
</head>
<body>
  <header>
    <h1>Multiplication Activity</h1>
    <div id="nav-placeholder"></div>
      <script>
        fetch("/nav.html")
          .then(response => response.text())
          .then(data => {
            document.getElementById("nav-placeholder").innerHTML = data;
        
            const currentPath = window.location.pathname.replace(/\/index\.html$/, "/");
            const navLinks = document.querySelectorAll("#nav-placeholder a");
        
            navLinks.forEach(link => {
              const linkPath = new URL(link.href).pathname.replace(/\/index\.html$/, "/");
              if (linkPath === currentPath) {
                link.classList.add("active");
              }
            });
          });
      </script>
  </header>
  <main>

    <p>The distributive property of multiplication over addition, \[A \cdot (B + C) = 
      {\color{green}AB} + {\color{orange}AC}\] has a natural interpretation as a sum 
      of areas:</p>

    <figure style="text-align: center;">
      <img src="fig5.png" alt="A(B + C) = AB + AC" style="display: inline-block;">
    </figure>

    <p>This property and its gemoetric interpretation generalize to arbitrarily large products.  For instance, we have the well-known FOIL (first, 
    inside, outside, last) product, \[(A + B) \cdot (C + D) = {\color{red}AC} + {\color{blue}AD} + {\color{orange}BC} + {\color{green}BD}\]</p>

    <figure style="text-align: center;">
      <img src="fig6.png" alt="(A + B)(C + D) = AC + AD + BC + BD" style="display: inline-block;">
    </figure>
      
      <p>For an even larger example, consider \[(A + B + C) \cdot (D + E + F) = {\color{red}AD} + {\color{orange}AE} + {\color{yellow}AF} + 
        {\color{blue}BD} + {\color{green}BE} + {\color{purple}BF} + {\color{pink}CD} + {\color{brown}CE} + {\color{grey}CF}\]</p>
    
    <figure style="text-align: center;">
      <img src="fig7.png" alt="(A + B + C)(D + E + F) = AD + AE + AF + BD + BE + BF + CD + CE + CF" style="display: inline-block;">
    </figure>
    
    <p>Consider the implications of this property for breaking down a difficult multiplication problem: we can break the two multiplicand decimal numbers 
      down into sums of their respective place values, and then use the distributive law to instead compute a sum of simpler products.  This is called 
    the <i>partial product</i> method, and has the same natural interpretation in terms of areas.  For instance, consider the problem</p>

    <div style="text-align: center;">
    <p>\(\begin{aligned}249 \cdot 63 = (200 + 40 + 9) \cdot (60 + 3) & = {\color{red}200 \cdot 60} + {\color{orange}200 \cdot 3} + 
      {\color{yellow}40 \cdot 60} + {\color{green}40 \cdot 3} + {\color{blue}9 \cdot 60} + {\color{purple}9 \cdot 3}\\ & = {\color{red}12000} + 
      {\color{orange}600} + {\color{yellow}2400} + {\color{green}120} + {\color{blue}540} + {\color{purple}27}\\ & = 15687 \end{aligned}\)</p>
    </div>

    <figure style="text-align: center;">
      <img src="fig8.png" alt="(200 + 40 + 9)(60 + 3) = 200(60) + 200(3) + 40(60) + 40(3) + 9(60) + 9(3)" style="display: inline-block;">
    </figure>

    
    <div class="button-container">
      <button id="start-btn" class="rubber-button">Start!</button>
    </div>
    
    <p id="question-text"></p>

    <div class="button-container">
      <button id="hint-btn" class="rubber-button">Hint</button>
    </div>
    
    <div id="hint-area" class="math" style="margin-top: 1em;"></div>

    <div class="activity-box" id="my-activity">

    </div>

    <div class="button-container">
      <button id="check-btn" class="rubber-button">Check Answer</button>
    </div>
    
    <div class="button-container">
      <div id="feedbackText" class="center-feedback"></div>
    </div>





  </main>

  <script>

    const hintBtn = document.getElementById('hint-btn');
    const hintArea = document.getElementById('hint-area');
    

    const startBtn = document.getElementById('start-btn');
    const questionText = document.getElementById('question-text');
    const activityBox = document.getElementById('my-activity');






    
  startBtn.addEventListener('click', () => {

      const feedback = document.getElementById('answer-feedback');
      feedback.textContent = '';

      // Play sound when view button is clicked
      const sound = document.getElementById('click-sound');
      if (sound) {
        sound.currentTime = 0; // rewind to start in case it's still playing
        sound.play();
      }

      let g1, g2, op, a1, a2;

      // Choose the operation, 1 is addition, 2 is multiplication, 3 is subtraction (subtraction ignores "both", and affects only the subtrahend)
      let opC = Math.floor(Math.random() * 3) + 1;

      // 33% chance that both integers in the operation are close to round numbers
      let both = Math.random() < 0.33;

      // If n1 or n2 are true, then d1, d2 are subtracted from g1, g2 respectively (by default added)
      let n1 = Math.random() < 0.5;
      let n2 = Math.random() < 0.5;

      // The amounts that are added or subtracted from g1, g2
      let d1 = Math.floor(Math.random() * 9) + 1;
      let d2 = Math.floor(Math.random() * 9) + 1;

      // This makes g1 either 100, 1000, or 10000, multiplied by an integer between 1 and 9
      let p1 = Math.floor(Math.random() * 3) + 2;
      let p2 = 10;
      g1 = (10 ** p1) * (Math.floor(Math.random() * 9) + 1);
      g2 = 0;

      if (opC === 3) {
        while (g2 < g1) {
          if (p1 === 2) {
            g2 = Math.floor(Math.random() * 900) + 100;
          } else if (p1 === 3) {
            g2 = Math.floor(Math.random() * 9000) + 1000;
          } else {
            g2 = Math.floor(Math.random() * 90000) + 10000;
          }
        }
      } else if (both) {
        p2 = Math.floor(Math.random() * 3) + 2;
        g2 = (10 ** (p2)) * (Math.floor(Math.random() * 9) + 1);
      } else if (opC === 1) {
        if (p1 === 2) {
          g2 = Math.floor(Math.random() * 90) + 10;
        } else if (p1 === 3) {
          g2 = Math.floor(Math.random() * 900) + 100;
        } else {
          g2 = Math.floor(Math.random() * 9000) + 1000;
        }
      } else {
        g2 = Math.floor(Math.random() * 8) + 2;
      }

      if (n1) {
        a1 = g1 - d1;
      } else {
        a1 = g1 + d1;
      }

      if (both) {
        if (n2) {
          a2 = g2 - d2;
        } else {
          a2 = g2 + d2;
        }
      } else {
        a2 = g2;
      }

      // This overrides the above if the operation is subtraction
      if (opC === 3) {
        a1 = g2;
        a2 = g1 - d1;
      }

    
      hintSteps = [];
      hintIndex = 0;
      let i = 0

  
      // Display the question
      questionText.textContent = `Stuff`;

      MathJax.typeset([questionText]);

      
      // Clear the activity box
      activityBox.innerHTML = '';
      
      // Create a canvas
      const canvas = document.createElement('canvas');
      canvas.width = 1300;
      canvas.height = 650;
      activityBox.appendChild(canvas);
      
      const ctx = canvas.getContext('2d');
      
      // Draw the universal set rectangle
      ctx.strokeStyle = 'black';
      ctx.lineWidth = 4;
      ctx.strokeRect(200, 30, 900, 500);


      hintIndex = 0;
      hintArea.innerHTML = "";  // Clear previous hints



    });


    const checkBtn = document.getElementById('check-btn');
    const feedbackText = document.getElementById('feedbackText');
    
    checkBtn.addEventListener('click', () => {
      // Play click sound
      const sound = document.getElementById('click-sound');
      if (sound) {
        sound.currentTime = 0;
        sound.play();
      }
    
      let correct = true;
    
      // Helper to check a region
      function checkRegion(variableName, correctValue) {
        const slot = document.getElementById(variableName);
        if (slot) {
          const guess = parseInt(slot.textContent);
          if (guess !== correctValue) {
            correct = false;
          }
        }
      }
    
      // Give feedback
      if (correct) {
        feedbackText.textContent = "Correct!";
        feedbackText.style.color = "green";
      } else {
        feedbackText.textContent = "Incorrect. Try again!";
        feedbackText.style.color = "red";
      }
    });


    hintBtn.addEventListener('click', () => {
      // Play sound when view button is clicked
      const sound = document.getElementById('click-sound');
      if (sound) {
        sound.currentTime = 0; // rewind to start in case it's still playing
        sound.play();
      }
      if (hintIndex < hintSteps.length) {
        // Create a new paragraph for each hint
        const hintPara = document.createElement('div');
        hintPara.classList.add('hint-step');
        hintPara.textContent = hintSteps[hintIndex];
        hintArea.appendChild(hintPara);
        
        MathJax.typeset([hintPara]);
        hintIndex++;
      }
    });

    
  </script>

  <audio id="click-sound" src="button.mp3" preload="auto"></audio>
  <audio id="set-sound" src="set2.mp3" preload="auto"></audio>
  
</body>
</html>
