
<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="description" content="Personal website of Ben Fraser, with math education activities for students and teachers.">
  <meta charset="UTF-8" />
  <title>Prime Factorization Activity</title>
  <link rel="stylesheet" href="/style.css" />

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
</head>
<body>
  <header>
    <h1>Prime Factorization Activity</h1>
    <div id="nav-placeholder"></div>
      <script>
fetch("/nav.html")
  .then(response => response.text())
  .then(html => {
    document.getElementById("nav-placeholder").innerHTML = html;

    const currentPath = window.location.pathname.replace(/\/index\.html$/, "/");
    const navLinks = document.querySelectorAll("#nav-placeholder a");
    navLinks.forEach(link => {
      const linkPath = new URL(link.href).pathname.replace(/\/index\.html$/, "/");
      if (linkPath === currentPath) {
        link.classList.add("active");
      }
    });

    const s = document.createElement("script");
    s.src = "/mascot.js";
    s.defer = true;
    document.body.appendChild(s); 
  })
  .catch(err => {
    console.error("Failed to load nav:", err);
  });
</script>
  </header>
  <main>

    <p>This is a placeholder for what will be a prime factorization activity.  Work in progress.</p>
    
    <div class="button-container">
      <button id="start-btn" class="rubber-button">Start!</button>
    </div>
    
    <p id="question-text"></p>

    <div class="activity-box" id="my-activity">

    </div>
    
    <div class="button-container">
      <div id="feedbackText" class="center-feedback"></div>
    </div>

  </main>

  <script>


    let a = 0, a2 = 0, a3 = 0, a5 = 0, a7 = 0, a11 = 0, an = 0;
    let b = 0, b2 = 0, b3 = 0, b5 = 0, b7 = 0, b11 = 0, bn = 0;


    const startBtn = document.getElementById('start-btn');
    const questionText = document.getElementById('question-text');
    const activityBox = document.getElementById('my-activity');


        function addTextToActivityBox(text, x, y, fontSize = 28) {
      const txt = document.createElement('div');
      txt.classList.add('activity-text');
      txt.textContent = text;
      txt.style.left = `${x}px`;
      txt.style.top = `${y}px`;
      txt.style.fontSize = `${fontSize}px`;
      activityBox.appendChild(txt);
    }


    function createFixedExponentBox(text, x, y, boxSize = 80, fontSize = 28) {
      const box = document.createElement('div');
      box.classList.add('exponent-box');
      box.style.left = `${x}px`;
      box.style.top = `${y}px`;
      box.style.width = `${boxSize}px`;
      box.style.height = `${boxSize}px`;
      box.style.fontSize = `${fontSize}px`;
      box.textContent = text;
      activityBox.appendChild(box);
      return box;
    }
    

    
  startBtn.addEventListener('click', () => {

    const feedback = document.getElementById('feedbackText');
    feedback.textContent = '';


    let question = `Do some math:`;

    let primes = [13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67];
    a2 = 20;
    b2 = 20;
  
    // Randomly determine prime powers
    while (a2 + a3 + a5 + a7 + a11 + an > 10) {
      a2 = Math.floor(Math.random() * 5);
      a3 = Math.floor(Math.random() * 4);
      a5 = Math.floor(Math.random() * 3);
      a7 = Math.floor(Math.random() * 2);
      a11 = Math.floor(Math.random() * 2);
      an = Math.floor(Math.random() * 2);
    }

    antype = primes[Math.floor(Math.random() * 14)];

    a = 2**a2 * 3**a3 * 5**a5 * 7**a7 * 11**a11 * antype**an;
    
    while (b2 + b3 + b5 + b7 + b11 + bn > 10) {
      b2 = Math.floor(Math.random() * 4.75);
      b3 = Math.floor(Math.random() * 3.75);
      b5 = Math.floor(Math.random() * 2.75);
      b7 = Math.floor(Math.random() * 1.75);
      b11 = Math.floor(Math.random() * 1.5);
      bn = Math.floor(Math.random() * 1.5);
    }

    bntype = primes[Math.floor(Math.random() * 14)];

    b = 2**b2 * 3**b3 * 5**b5 * 7**b7 * 11**b11 * bntype**bn;
  
    console.log(`a powers: ${a2}, ${a3}, ${a5}, ${a7}, ${a11}, ${an} and a mystery prime: ${antype}`);
    console.log(`b powers: ${b2}, ${b3}, ${b5}, ${b7}, ${b11}, ${bn} and b mystery prime: ${bntype}`);

    // Display the question
    questionText.textContent = question + ` with the numbers ${a} and ${b}.`;

    MathJax.typeset([questionText]);

    
    // Clear the activity box
    activityBox.innerHTML = '';
    
    // Create a canvas
    const canvas = document.createElement('canvas');
    canvas.width = 1300;
    canvas.height = 650;
    activityBox.appendChild(canvas);
    
    const ctx = canvas.getContext('2d');
    
    // Draw the universal set rectangle
    ctx.strokeStyle = 'black';
    ctx.lineWidth = 4;

  });

    const feedbackText = document.getElementById('feedbackText');
    
  </script>

  <audio id="click-sound" src="button.mp3" preload="auto"></audio>
  <audio id="set-sound" src="set2.mp3" preload="auto"></audio>
  
</body>
</html>
