

<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="description" content="Personal website of Ben Fraser, with math education activities for students and teachers.">
  <meta charset="UTF-8" />
  <title>Systems of Equations Activity</title>
  <link rel="stylesheet" href="/style.css" />

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
</head>
<body>
  <header>
    <h1>Systems of Equations Activity</h1>
    <div id="nav-placeholder"></div>
      <script>
fetch("/nav.html")
  .then(response => response.text())
  .then(html => {
    document.getElementById("nav-placeholder").innerHTML = html;

    const currentPath = window.location.pathname.replace(/\/index\.html$/, "/");
    const navLinks = document.querySelectorAll("#nav-placeholder a");
    navLinks.forEach(link => {
      const linkPath = new URL(link.href).pathname.replace(/\/index\.html$/, "/");
      if (linkPath === currentPath) {
        link.classList.add("active");
      }
    });

    const s = document.createElement("script");
    s.src = "/mascot.js";
    s.defer = true;
    document.body.appendChild(s); 
  })
  .catch(err => {
    console.error("Failed to load nav:", err);
  });
</script>
  </header>
  <main>

    <p>We have previously seen how to solve simple systems of equations: namely, when two lines were put in slope-intercept form, 
      setting their right-hand sides equal to one another to solve for \(x\) (and subsequently, \(y\).  This is a specific case 
      of a more general strategy for solving systems of equations: that is, multiple equations are all true, and we need to find 
      what values of the variables satisfy all simultaneously.
    </p>
    
    <p>Note that our previous strategy <b>reduced</b> the problem to solving an equation which contained only a single variable, 
      \(x\).  This will be our strategy in general: to eliminate variables from the problem, and solve over a reduced number of 
      variables.  This is called <b>Gaussian elimination</b>.  Operations we are allowed to perform are:
    </p>

    <ul>
      <li>Multiply an equation by a nonzero constant</li>
      <li>Add/subtract a multiple of one equation to/from another</li>
    </ul>
      
    <p>Generally, this algorithm will amount to multiplying two equations by different numbers so that the coefficients on one 
      of the variables line up across both equations, and then subtracting one equation from the other.  As far as <i>what</i> 
      numbers we multiply the equations by, the choice will look very much like giving two fractions common denominators: multiply 
      each equation by the coefficient of the variable on the other equation.  For instance, to solve the system
      \[2x + 5y = 9\]
      \[3x + 4y = 10\]
      we can multiply the first equation by 3, and the second equation by 2 (the coefficient of \(x\) in the other equation), 
      obtaining
      \[6x + 15y = 27\]
      \[6x + 8y = 7\]
      and then subtracting the second equation from the first, we get
      \[7y = y \implies y = 1\]
      and substituting this value for \(y\) into either of our starting equations, we solve for \(x\):
      \[2x + 5(1) = 9 \implies 2x = 4 \implies x = 2\]
    </p>


    <p>Another strategy we can use to solve systems of equations is <b>substitution</b>: wherein we can substitute one expression 
      for another when they are known to be equal to one another.  Some problems lend themselves particularly naturally to the 
      substitution strategy.  Take for instance the following word problem.
    </p>

    <p>A steak costs twice as much as a bowl of pasta, and a side of fries costs one third of what a bowl of pasta costs. 
      If you order all three items, it costs $70.  How much does each item cost?
    </p>

    <p>We start with some "let" statements, where we choose sensibly-named variables to represent the cost of each item:
    </p>

    <ul>
      <li>Let \(s\) be the price of a steak</li>
      <li>Let \(p\) be the price of a bowl of pasta</li>
      <li>Let \(f\) be the price of a side of fries</li>
    </ul>

    <p>Then, we can use the relationships between the prices of the items to obtain some equations:
    </p>

    <ul>
      <li>\(s = 2p\)</li>
      <li>\(f = \frac{1}{3}p\)</li>
      <li>\(s + p + f = 70\)</li>
    </ul>

    <p>We want to reduce the problem to one over a single variable.  There are a few ways we could do this, all of which will lead 
      us to the same solution in the end.  The obvious one from the above is that we have expressed the price of both steak and 
      fries in terms of the price of pasta: we could <b>substitute</b> these expressions for \(s\) and \(f\) in the final equation:
      \[s + p + f = 70 \implies 2p + p + \frac{1}{3}p = 70\]
      We can then solve for \(p\):
      \[2p + p + \frac{1}{3}p = 70 \implies \frac{10}{3}p = 70 \implies p = 70 \div \frac{10}{3} \implies p = 70 \cdot \frac{3}{10} 
      \implies p = 21\]
      Then, substituting our price for pasta into the expressions for the other prices, we find them all:
      \[s = 2p \implies s = 2(21) = 42 \hspace{3cm} f = \frac{1}{3}p \implies f = \frac{1}{3} \cdot 21 = 7\]
      People often have difficulty working with fractions.  Consider an alternate choice of substitution which would have avoided 
      them in the above solution.
    </p>

    <p>Since fries cost a third of what pasta costs, pasta costs triple what fries cost.  Then since steak costs double what pasta 
      costs, it costs six times as much as fries:
    </p>

    <ul>
      <li>\(s = 6f\)</li>
      <li>\(p = 3f\)</li>
      <li>\(s + p + f = 70\)</li>
    </ul>

    <p>Then we follow the same substitution strategy:
      \[s + p + f = 70 \implies 6f + 3f + f = 70\]
      We can then solve for \(f\):
      \[6f + 3f + f = 70 \implies 10f = 70 \implies f = 7\]
      Then, substituting our price for fries into the expressions for the other prices, we find them all:
      \[s = 6f \implies s = 6(7) = 42 \hspace{3cm} p = 3f \implies p = 3(7) = 21\]
    </p>

    

    <div class="button-container">
      <button id="start-btn" class="rubber-button">Start!</button>
    </div>
    
    <p id="question-text" class="math"></p>
</main>
<script>
// -----------------------------
// Systems of Equations: question generation only
// -----------------------------
const startBtn = document.getElementById('start-btn');
const questionText = document.getElementById('question-text');

function playSound(id) {
  const s = document.getElementById(id);
  if (s) { s.currentTime = 0; s.play(); }
}

function randInt(a, b) {
  return Math.floor(Math.random() * (b - a + 1)) + a;
}

function choice(arr) {
  return arr[randInt(0, arr.length - 1)];
}

function gcd(a, b) {
  a = Math.abs(a); b = Math.abs(b);
  while (b !== 0) { const t = a % b; a = b; b = t; }
  return a === 0 ? 1 : a;
}

function reduceFrac(num, den) {
  if (den < 0) { den = -den; num = -num; }
  const g = gcd(num, den);
  return [num / g, den / g];
}

function fracToTex(num, den) {
  const [n, d] = reduceFrac(num, den);
  if (d === 1) return `${n}`;
  return `\frac{${n}}{${d}}`;
}

function moneyFromCents(cents) {
  const sign = cents < 0 ? "-" : "";
  cents = Math.abs(Math.round(cents));
  const dollars = Math.floor(cents / 100);
  const rem = cents % 100;
  return sign + "$" + dollars.toString() + (rem === 0 ? "" : "." + rem.toString().padStart(2, "0"));
}

function typeset() {
  if (!window.MathJax) return;
  if (MathJax.typesetPromise) MathJax.typesetPromise();
  else if (MathJax.typeset) MathJax.typeset();
}

// -----------------------------
// Type (1): compare two pricing schemes
// -----------------------------
const type1Scenarios = [
  { x: "admission", y: "theme park price", z: "ride", mode: "integerZ" },
  { x: "admission", y: "wedding", z: "drink", mode: "integerZ" },
  { x: "the rental", y: "moving company fee", z: "lb", mode: "positiveZ" },
  { x: "the realtor fee", y: "land parcel price", z: "km^2", mode: "positiveZ" }
];

function genType1() {
  const sc = choice(type1Scenarios);

  // We'll work in cents to avoid floating issues.
  // Price model: total = flat + rate * z
  // Solve flat1 + rate1*z = flat2 + rate2*z -> z = (flat2-flat1)/(rate1-rate2)

  let flat1, flat2, rate1, rate2, zNum, zDen;

  function reasonableRanges() {
    // returns [flatMin, flatMax, rateMin, rateMax] in cents (rate is per z unit)
    if (sc.y === "theme park price") return [1500, 8000, 100, 900];          // $15-$80 admission, $1-$9 per ride
    if (sc.y === "wedding") return [20000, 120000, 150, 1500];               // $200-$1200 base, $1.50-$15 per drink
    if (sc.y === "moving company fee") return [5000, 40000, 5, 60];           // $50-$400 base, $0.05-$0.60 per lb
    return [10000, 120000, 50, 900];                                         // realtor fee: $100-$1200 base, $0.50-$9 per km^2
  }

  const [flatMin, flatMax, rateMin, rateMax] = reasonableRanges();

  if (sc.mode === "integerZ") {
    // Force a positive nonzero integer solution z
    const z = randInt(1, 25);

    // Choose distinct integer cent rates
    do {
      rate1 = randInt(rateMin, rateMax);
      rate2 = randInt(rateMin, rateMax);
    } while (rate1 === rate2);

    // Choose a flat1, then set flat2 so that z solves it.
    // flat2 = flat1 + z*(rate1-rate2)
    // Make sure flats stay positive and within some reasonable extension of range.
    for (let tries = 0; tries < 500; tries++) {
      flat1 = randInt(flatMin, flatMax);
      const delta = z * (rate1 - rate2);
      flat2 = flat1 + delta;

      if (flat2 > 0 && flat2 >= Math.floor(flatMin * 0.6) && flat2 <= Math.floor(flatMax * 1.4)) {
        zNum = z; zDen = 1;
        break;
      }
    }
    if (!zNum) return genType1(); // retry if unlucky
  } else {
    // Only need positive z (can be non-integer). We'll randomly generate and reject until z>0.
    for (let tries = 0; tries < 2000; tries++) {
      flat1 = randInt(flatMin, flatMax);
      flat2 = randInt(flatMin, flatMax);
      rate1 = randInt(rateMin, rateMax);
      rate2 = randInt(rateMin, rateMax);
      if (rate1 === rate2) continue;

      const num = flat2 - flat1;
      const den = rate1 - rate2;
      if (num === 0) continue;

      // z = num/den > 0
      if ((num > 0 && den > 0) || (num < 0 && den < 0)) {
        const [rn, rd] = reduceFrac(num, den);
        if (rn > 0 && rd > 0) {
          zNum = rn; zDen = rd;
          break;
        }
      }
    }
    if (!zNum) return genType1();
  }

  // Render
  const zAnswerTex = (zDen === 1) ? `${zNum}` : `\frac{${zNum}}{${zDen}}`;

  questionText.innerHTML =
    `You are comparing two different ${sc.y}s. ` +
    `The first ${sc.y} costs a flat amount for ${sc.x} of ${moneyFromCents(flat1)}, plus ${moneyFromCents(rate1)} per ${sc.z}. ` +
    `The second ${sc.y} costs a flat amount for ${sc.x} of ${moneyFromCents(flat2)}, plus ${moneyFromCents(rate2)} per ${sc.z}. ` +
    `At how many ${sc.z}s are the two ${sc.y}s the same price?`;

  // (We compute the answer but do not display/grade yet)
  window.__lastSystemAnswer = { type: 1, zNum, zDen, zTex: zAnswerTex };
}

// -----------------------------
// Type (2): ratios relative to y plus total
// -----------------------------
const type2Scenarios = [
  { x: "steak", y: "lobster", z: "caviar", base: [1200, 6500] },                 // y dollars range
  { x: "a sedan", y: "a van", z: "a truck", base: [1800000, 5200000] },          // y dollars range
  { x: "a hammer", y: "a table saw", z: "a drill", base: [1500, 55000] },        // y dollars range
  { x: "socks", y: "a shirt", z: "a coat", base: [800, 18000] }                  // y dollars range
];

function randomRatio() {
  // Return rational a/b and a human-readable phrase and TeX
  const asInteger = Math.random() < 0.6; // slight bias toward integers
  if (asInteger) {
    const k = randInt(2, 10);
    return { a: k, b: 1, phrase: `${k} times`, tex: `${k}` };
  }
  const d = randInt(2, 10);
  return { a: 1, b: d, phrase: `\(\frac{1}{${d}}\) of`, tex: `\frac{1}{${d}}` };
}

function genType2() {
  const sc = choice(type2Scenarios);

  const rX = randomRatio(); // x = (a/b)*y
  const rZ = randomRatio(); // z = (a/b)*y

  // Choose y as cents (integer dollars 75% of the time, else cents),
  // then compute x and z exactly.
  const integerDollars = Math.random() < 0.75;

  for (let tries = 0; tries < 2000; tries++) {
    let yCents;
    if (integerDollars) {
      const yDollars = randInt(Math.floor(sc.base[0] / 100), Math.floor(sc.base[1] / 100));
      yCents = yDollars * 100;
    } else {
      // cents: pick to the nearest 5 cents to keep numbers sane
      const lo = sc.base[0], hi = sc.base[1];
      yCents = randInt(Math.floor(lo / 5), Math.floor(hi / 5)) * 5;
    }

    // x = (rX.a/rX.b)*y; z = (rZ.a/rZ.b)*y
    if ((yCents * rX.a) % rX.b !== 0) continue;
    if ((yCents * rZ.a) % rZ.b !== 0) continue;

    const xCents = (yCents * rX.a) / rX.b;
    const zCents = (yCents * rZ.a) / rZ.b;

    const total = xCents + yCents + zCents;

    // Sanity bounds: avoid absurd totals
    if (total <= 0) continue;

    questionText.innerHTML =
      `If ${sc.x} costs ${rX.phrase} as much as ${sc.y}, ` +
      `and ${sc.z} costs ${rZ.phrase} as much as ${sc.y}, ` +
      `and together, they all cost ${moneyFromCents(total)}, ` +
      `then how much does each item cost?`;

    window.__lastSystemAnswer = {
      type: 2,
      xCents, yCents, zCents,
      totalCents: total,
      ratios: { rX, rZ },
      items: sc
    };
    break;
  }
}

// -----------------------------
// Type (3): two bills -> solve for unit prices
// -----------------------------
const type3Scenarios = [
  { x: "steak", y: "lobster", px: [1800, 6500], py: [1800, 6500] },
  { x: "sedan", y: "van", px: [1600000, 4200000], py: [1600000, 4200000] },
  { x: "hammer", y: "drill", px: [1200, 55000], py: [1200, 55000] },
  { x: "shirt", y: "coat", px: [1200, 18000], py: [1200, 18000] }
];

function genType3() {
  const sc = choice(type3Scenarios);
  const integerDollars = Math.random() < 0.75;

  // generate prices
  let px, py;
  function pickPrice(range) {
    if (integerDollars) {
      const dollars = randInt(Math.floor(range[0] / 100), Math.floor(range[1] / 100));
      return dollars * 100;
    }
    return randInt(Math.floor(range[0] / 5), Math.floor(range[1] / 5)) * 5;
  }

  for (let tries = 0; tries < 2000; tries++) {
    px = pickPrice(sc.px);
    py = pickPrice(sc.py);
    if (px <= 0 || py <= 0) continue;

    const a = randInt(2, 15);
    const b = randInt(2, 15);
    const c = randInt(2, 15);
    const d = randInt(2, 15);

    // Ensure not proportional: unique solution
    if (a * d === b * c) continue;

    const bill1 = a * px + b * py;
    const bill2 = c * px + d * py;

    questionText.innerHTML =
      `If you buy ${a} ${sc.x}${a === 1 ? "" : "s"} and ${b} ${sc.y}${b === 1 ? "" : "s"}, your bill is ${moneyFromCents(bill1)}, ` +
      `and if you buy ${c} ${sc.x}${c === 1 ? "" : "s"} and ${d} ${sc.y}${d === 1 ? "" : "s"}, your bill is ${moneyFromCents(bill2)}. ` +
      `How much does each item cost?`;

    window.__lastSystemAnswer = {
      type: 3,
      pxCents: px, pyCents: py,
      a, b, c, d,
      bill1Cents: bill1, bill2Cents: bill2,
      items: sc
    };
    break;
  }
}

// -----------------------------
// Start: generate one of the 3 types
// -----------------------------
startBtn.addEventListener('click', () => {
  playSound('click-sound');
  // Clear any old question
  questionText.textContent = '';

  const t = randInt(1, 3);
  if (t === 1) genType1();
  if (t === 2) genType2();
  if (t === 3) genType3();

  typeset();
});
</script>



  <audio id="click-sound" src="button.mp3" preload="auto"></audio>
  <audio id="set-sound" src="set2.mp3" preload="auto"></audio>

</body>
</html>
